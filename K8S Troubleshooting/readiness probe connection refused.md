# ๐ฆ ูุชู ุชููู Readiness Probe ูุงุดูุฉ ูู Kubernetesุ

---

## ๐ง ูุนูู ูุดู Readiness Probe

๎image_group๎{"layout":"carousel","aspect_ratio":"1:1","query":["kubernetes readiness probe failed diagram","kubernetes pod not ready state","kubernetes service removing pod from endpoints","kubernetes readiness probe http 503 example"],"num_per_query":1}๎

ุนูุฏ ูุดู Readiness Probe ูุญุฏุซ ุงูุขุชู:

* ูุชุญูู ุงูู Pod ุฅูู ุญุงูุฉ **Not Ready**
* ูุชู ุฅุฒุงูุชู ูู Service Endpoints
* ูุชููู ุงุณุชูุจุงู ุงูุชุฑุงููู
* โ ูุง ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุญุงููุฉ

---

# ๐ ุงูุญุงูุงุช ุงูุชู ุชุคุฏู ููุดู Readiness Probe

---

## 1๏ธโฃ ุฑุฌูุน HTTP Status ุบูุฑ ูุงุฌุญ

ูู endpoint ูุฑุฌุน:

* 404
* 500
* 503

ูุซุงู:

```yaml
readinessProbe:
  httpGet:
    path: /health
    port: 8080
```

ูู `/health` ุฑุฌุนุช 503 โ ุชุนุชุจุฑ ูุดู.

---

## 2๏ธโฃ ุงูุชุทุจูู ูู ููุชูู ุชุดุบููู

* ูุง ุฒุงู ูุนูู initialization
* ูููู ุจุนูู migration
* ูุญูู ุจูุงูุงุช
* ููุชุธุฑ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## 3๏ธโฃ ูุดููุฉ ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

ูู ุงูุชุทุจูู ูุนุชูุฏ ุนูู DB ูุงูู DB ุบูุฑ ูุชุงุญุฉ:

* endpoint ูุฑุฌุน 500
* readiness ุชูุดู

---

## 4๏ธโฃ Timeout

```yaml
timeoutSeconds: 1
```

ูู ุงูุชุทุจูู ูุญุชุงุฌ ุฃูุซุฑ ูู ุซุงููุฉ ููุฑุฏ โ ูุนุชุจุฑ ูุดู.

---

## 5๏ธโฃ ุฎุทุฃ ูู ุงููุณุงุฑ (Path ุบูุท)

```yaml
path: /wrongpath
```

ูุฑุฌุน 404 โ readiness ุชูุดู.

---

## 6๏ธโฃ TCP Probe ูุง ูุณุชุทูุน ูุชุญ ุงูุงุชุตุงู

```yaml
readinessProbe:
  tcpSocket:
    port: 8080
```

ูู ุงูุจูุฑุช ุบูุฑ ููุชูุญ โ ุชูุดู.

---

## 7๏ธโฃ Command Probe ูุฑุฌุน Exit Code โ 0

```yaml
readinessProbe:
  exec:
    command:
      - cat
      - /tmp/healthy
```

ูู ุงูููู ุบูุฑ ููุฌูุฏ โ Exit Code 1 โ readiness ุชูุดู.

---

# ๐งช ููู ุชุชุญูู ูู ุณุจุจ ุงููุดูุ

```bash
kubectl describe pod <pod-name>
```

ูุซุงู ุฑุณุงูุฉ ุงูุฎุทุฃ:

```
Readiness probe failed: HTTP probe failed with statuscode: 503
```

ุฃู:

```
Readiness probe failed: connect: connection refused
```

---

# ๐ฏ ุงููุฑู ุจูู ุฃููุงุน ุงูู Probes
# ๐ข Kubernetes Probes: ูุชู ุชุณุชุฎุฏู ูู ูุงุญุฏุฉ

---

## 1๏ธโฃ Readiness Probe

**ุงูุงุณุชุฎุฏุงู:** ุงูุชุญูู ูู ุชูุฒูุน ุงูุชุฑุงููู ููุทุ ุฏูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุฏ.

**ุญุงูุงุช ุงูุงุณุชุฎุฏุงู:**

* ุงูุชุทุจูู ูุญุชุงุฌ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช ูุจู ุงุณุชูุจุงู ุงูุทูุจุงุช.
* ุชุญููู ูููุงุช ุฃู ุฅุนุฏุงุฏุงุช ุนูุฏ ุงูุฅููุงุน.
* Microservice ูุนุชูุฏ ุนูู ุฎุฏูุฉ ุฃุฎุฑู.

**ุงูุณููู ุนูุฏ ุงููุดู:**

* Pod ูุชุญูู ุฅูู Not Ready.
* Service ูููู ุงูุชุฑุงููู ููุจูุฏ.
* ูุง ูุนุงุฏ ุชุดุบูู ุงูุญุงููุฉ.

**ูุซุงู:**

```yaml
readinessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10
```

---

## 2๏ธโฃ Liveness Probe

**ุงูุงุณุชุฎุฏุงู:** ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุฏ ุฅุฐุง ุชููู ุฃู ุนูู.

**ุญุงูุงุช ุงูุงุณุชุฎุฏุงู:**

* ุงูุชุทุจูู ูุฏุฎู ูู infinite loop.
* Deadlock ุฃู ุชููู ุนู ุงูุงุณุชุฌุงุจุฉ.
* Memory leak ูููู ุงูุชุทุจูู.

**ุงูุณููู ุนูุฏ ุงููุดู:**

* Kubernetes ูุนูุฏ ุชุดุบูู ุงูุจูุฏ.
* Traffic ูุฑุณู ููุท ุฅุฐุง ุงูุจูุฏ Ready.

**ูุซุงู:**

```yaml
livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 15
  periodSeconds: 20
```

---

## 3๏ธโฃ Startup Probe

**ุงูุงุณุชุฎุฏุงู:** ูุชุทุจููุงุช ุชุญุชุงุฌ ููุช ุทููู ููุฅููุงุน ูุจู ุชูุนูู Liveness ู Readiness.

**ุญุงูุงุช ุงูุงุณุชุฎุฏุงู:**

* Java Spring Boot ูุญุชุงุฌ 60 ุซุงููุฉ ููุจุฏุก.
* ุชุญููู ML model ูุจูุฑ.
* Initialization ุทููู.

**ุงูุณููู ุนูุฏ ุงููุดู:**

* ูููุน ูุญูุตุงุช Liveness/Readiness ุญุชู ุงูุชูุงุก Startup Probe.
* ุฅุฐุง ูู ุชูุฌุญ ุถูู ุงูููุช ุงููุญุฏุฏ โ ูุนุงุฏ ุชุดุบูู ุงูุจูุฏ.

**ูุซุงู:**

```yaml
startupProbe:
  httpGet:
    path: /health
    port: 8080
  failureThreshold: 30
  periodSeconds: 10
```

---

## 4๏ธโฃ ุงุณุชุฎุฏุงู Readiness + Liveness ูุนูุง

**ุงูุญุงูุฉ:** ุบุงูุจูุง ูู ุงูุฅูุชุงุฌ.

* Readiness โ ููุชุญูู ูู ุงูุชุฑุงููู.
* Liveness โ ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุฏ ุนูุฏ ุงูุชุนุทู.

**ูุซุงู ุนููู:**

* Microservice ูุชุตู ุจDB ููุฏ ูุนูู ุฃุซูุงุก ุงูุชุดุบูู.

  * Readiness โ ููุดู ุฅุฐุง DB ุบูุฑ ูุชุงุญุฉ โ ุชููู ุงูุชุฑุงููู.
  * Liveness โ ูุนูุฏ ุชุดุบูู ุงูุจูุฏ ุฅุฐุง ุงูุชุทุจูู ุชููู.

**ุฃูุถู ููุงุฑุณุฉ:**

* ุงุณุชุฎุฏู Startup Probe ุฅุฐุง ูุงู ุงูุชุทุจูู ูุญุชุงุฌ ููุช ุทููู ููุฅููุงุน.
* ุจุนุฏ ุงูุฅููุงุนุ ุงุณุชุฎุฏู Liveness + Readiness ูุฅุฏุงุฑุฉ ุงูุชุฑุงููู ูุงุณุชูุฑุงุฑ ุงูุจูุฏ.

---

# ๐น ููุฎุต ุงูุณููุงุฑูููุงุช

| Probe                | ุงูุงุณุชุฎุฏุงู                                              | ูุซุงู ุนููู                                    |
| -------------------- | ------------------------------------------------------ | -------------------------------------------- |
| Readiness            | ุงูุชุญูู ูู ุงูุชุฑุงููู ููุท                                 | ุงูุชุทุจูู ููุชุธุฑ DB                             |
| Liveness             | ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุฏ ุนูุฏ ุงูุชุนุทู                           | ุงูุชุทุจูู ูุฏุฎู infinite loop                   |
| Startup              | ุชุฃุฌูู ุงููุญูุตุงุช ุนูุฏ ุงูุฅููุงุน ุงูุทููู                      | Java Spring Boot ูุญุชุงุฌ 60 ุซุงููุฉ              |
| Readiness + Liveness | ุงูุฅูุชุงุฌูุฉ ุงูุญููููุฉุ ุงูุชุญูู ูู ุงูุชุฑุงููู + ุฅุนุงุฏุฉ ุงูุชุดุบูู | Microservice ูุชุตู ุจDB ููุฏ ูุนูู ุฃุซูุงุก ุงูุชุดุบูู |
